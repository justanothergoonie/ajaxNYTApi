{"version":3,"sources":["main.js"],"names":["Main","dateString","matched","match","console","log","year","length","Date","getFullYear","testDate","parseInt","mm","dd","formattedDate","event","preventDefault","queryEl","document","querySelector","queryTerm","value","startDateEl","startDateOrig","startDate","reformatDate","endDateEl","endDateOrig","endDate","sortOptionsEl","sortOptionOrig","searchOptions","begin_date","end_date","sort","api","NytApi","alert","search","setupEventListeners","buttonEl","addEventListener","handleSearch","bodyEl","handleResults","handleSearchError","results","allResultsEl","textContent","r","detail","resultsEl","createElement","appendChild","articleContainer","setAttribute","aboutArticleContainer","sectionEl","section_name","linkEl","headlineEl","web_url","headline","main","snippetEl","snippet","byLineDateContainer","bylineEl","byline","original","innerText","dateEl","pub_date","slice","toDateString","imgEl","m","multimedia","url","error"],"mappings":"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","sourcesContent":["//\nclass Main {\n\tconstructor() {\n\t\t// the flow\n\t\t//1. set up form event listener(s) that will make the API calls\n\t\t//2. setup callback functions to process API responses\n\t\tthis.setupEventListeners();\n\t}\n\tsetupEventListeners() {\n\t\tconst buttonEl = document.querySelector('[name=\"search\"]');\n\t\tbuttonEl.addEventListener('click', this.handleSearch);\n\t\t// buttonEl.addEventListener('click', this.handleResults);\n\t\tconst bodyEl = document.querySelector('body');\n\t\tbodyEl.addEventListener('got-results', this.handleResults);\n\t\tbodyEl.addEventListener('got-error', this.handleSearchError);\n\t}\n\n\t/**\n\t * Takes a string value input by a user and converts it to the\n\t * format expected by the NYT API e.g. YYYYMMDD\n\t *\n\t * If the value is empty, or is an invalid date, return null.\n\t *\n\t * Allowable input formats: mm/dd/yyyy, mm/dd/yy (will prefix year with 20)\n\t * \t\t\t\t\t\t\tmm/dd (will assume the current year)\n\t * \t\t\t\t\t\t\tmm.dd.yyyy, mm-dd-yyyy (and similar variations)\n\t */\n\n\treformatDate = (dateString) => {\n\t\tif (dateString == null || dateString == '') {\n\t\t\treturn null;\n\t\t}\n\n\t\tconst matched = dateString.match(\n\t\t\t/^(0?[1-9]|1[0-2])\\W(3[01]|[12][0-9]|0?[1-9])\\W?(\\d*?)$/\n\t\t);\n\t\tconsole.log('matched', matched);\n\n\t\tlet year = matched[3];\n\t\tif (year.length == 0) {\n\t\t\tyear = new Date().getFullYear();\n\t\t} else if (year.length == 2) {\n\t\t\tyear = `20${year}`;\n\t\t} else if (year.length != 4) {\n\t\t\treturn null;\n\t\t}\n\n\t\tconst testDate = new Date(year, parseInt(matched[1]) - 1, matched[2]);\n\t\tconsole.log('testDate', testDate);\n\t\tif (testDate == null) {\n\t\t\treturn null;\n\t\t}\n\n\t\tlet mm = matched[1];\n\t\tif (mm.length == 1) {\n\t\t\tmm = `0${mm}`;\n\t\t}\n\t\tlet dd = matched[2];\n\t\tif (dd.length == 1) {\n\t\t\tdd = `0${dd}`;\n\t\t}\n\t\tlet formattedDate = `${year}${mm}${dd}`;\n\t\tconsole.log('formattedDate', formattedDate);\n\t\treturn formattedDate;\n\t};\n\thandleSearch = (event) => {\n\t\tevent.preventDefault();\n\t\t//\n\t\tconst queryEl = document.querySelector('[name=\"query\"]');\n\t\tconst queryTerm = queryEl.value;\n\n\t\tconst startDateEl = document.querySelector('[name=\"startDate\"]');\n\t\tconst startDateOrig = startDateEl.value;\n\t\tconst startDate = this.reformatDate(startDateOrig);\n\n\t\tconst endDateEl = document.querySelector('[name=\"endDate\"]');\n\t\tconst endDateOrig = endDateEl.value;\n\t\tconst endDate = this.reformatDate(endDateOrig);\n\n\t\tconst sortOptionsEl = document.querySelector('[name=\"sort\"]');\n\t\tconst sortOptionOrig = sortOptionsEl.value;\n\n\t\tconst searchOptions = {};\n\t\tif (startDate != null) {\n\t\t\tsearchOptions.begin_date = startDate;\n\t\t}\n\t\tif (endDate != null) {\n\t\t\tsearchOptions.end_date = endDate;\n\t\t}\n\t\tsearchOptions.sort = sortOptionOrig;\n\n\t\tconsole.log('searching...', queryTerm, searchOptions);\n\t\tconst api = new NytApi();\n\t\tif (queryTerm === '') {\n\t\t\talert('You need to search for something');\n\t\t} else {\n\t\t\tapi.search(queryTerm, searchOptions);\n\t\t}\n\t};\n\n\thandleResults(results) {\n\t\tconst allResultsEl = document.querySelector('.results');\n\n\t\tallResultsEl.textContent = ' ';\n\t\tfor (let r in results.detail) {\n\t\t\t//\n\t\t\tconst resultsEl = document.createElement('li');\n\t\t\tallResultsEl.appendChild(resultsEl);\n\t\t\t//\n\t\t\tconst articleContainer = document.createElement('div');\n\t\t\tarticleContainer.setAttribute('class', 'article-Container');\n\t\t\tresultsEl.appendChild(articleContainer);\n\t\t\t//\n\t\t\tconst aboutArticleContainer = document.createElement('div');\n\t\t\taboutArticleContainer.setAttribute(\n\t\t\t\t'class',\n\t\t\t\t'about-Article-Container)'\n\t\t\t);\n\t\t\tarticleContainer.appendChild(aboutArticleContainer);\n\t\t\t//\n\t\t\tconst sectionEl = document.createElement('span');\n\t\t\taboutArticleContainer.appendChild(sectionEl);\n\t\t\tsectionEl.textContent = results.detail[r].section_name;\n\t\t\t//\n\n\t\t\t//\n\t\t\tconst linkEl = document.createElement('a');\n\t\t\taboutArticleContainer.appendChild(linkEl);\n\t\t\tconst headlineEl = document.createElement('h2');\n\t\t\tlinkEl.appendChild(headlineEl);\n\t\t\tlinkEl.setAttribute('href', results.detail[r].web_url);\n\t\t\tlinkEl.setAttribute('target', '_blank');\n\t\t\theadlineEl.textContent = results.detail[r].headline.main;\n\t\t\t//\n\n\t\t\t//\n\t\t\tconst snippetEl = document.createElement('p');\n\t\t\taboutArticleContainer.appendChild(snippetEl);\n\t\t\tsnippetEl.textContent = results.detail[r].snippet;\n\t\t\t//\n\t\t\tconst byLineDateContainer = document.createElement('div');\n\t\t\tbyLineDateContainer.setAttribute('class', 'byLine-Date-Container');\n\t\t\tarticleContainer.appendChild(byLineDateContainer);\n\n\t\t\t//\n\t\t\tconst bylineEl = document.createElement('span');\n\t\t\tbyLineDateContainer.appendChild(bylineEl);\n\t\t\tif (results.detail[r].byline.original === null) {\n\t\t\t\tbylineEl.innerText === 'NYT';\n\t\t\t} else {\n\t\t\t\tbylineEl.textContent = results.detail[r].byline.original + ' ';\n\t\t\t}\n\t\t\t//\n\t\t\tconst dateEl = document.createElement('span');\n\t\t\tbyLineDateContainer.appendChild(dateEl);\n\t\t\tnew Date(results.detail[r].pub_date.slice(0, 19));\n\t\t\tdateEl.textContent = new Date(\n\t\t\t\tresults.detail[r].pub_date\n\t\t\t).toDateString();\n\t\t\t//\n\t\t\tconst imgEl = document.createElement('img');\n\t\t\tresultsEl.appendChild(imgEl);\n\t\t\tfor (let m in results.detail[r].multimedia) {\n\t\t\t\timgEl.setAttribute(\n\t\t\t\t\t'src',\n\t\t\t\t\t'https://www.nytimes.com/' +\n\t\t\t\t\t\tresults.detail[r].multimedia[m].url\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t\t// console.log(results.detail);\n\t}\n\n\thandleSearchError(error) {}\n}\n\nnew Main();\n"],"file":"main.js"}